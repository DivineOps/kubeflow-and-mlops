{"source":2,"revision":37,"description":null,"createdBy":{"displayName":"Sasha Rosenbaum","url":"https://spsprodcus1.vssps.visualstudio.com/A8ab679b7-72d5-4e57-9d81-bcbee196a68a/_apis/Identities/8950b4b5-5046-43c0-85d6-d8cba28eac83","_links":{"avatar":{"href":"https://dev.azure.com/sasrose/_apis/GraphProfile/MemberAvatars/aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj"}},"id":"8950b4b5-5046-43c0-85d6-d8cba28eac83","uniqueName":"sasrose@microsoft.com","imageUrl":"https://dev.azure.com/sasrose/_apis/GraphProfile/MemberAvatars/aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj","descriptor":"aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj"},"createdOn":"2019-09-19T20:38:07.283Z","modifiedBy":{"displayName":"Sasha Rosenbaum","url":"https://spsprodcus1.vssps.visualstudio.com/A8ab679b7-72d5-4e57-9d81-bcbee196a68a/_apis/Identities/8950b4b5-5046-43c0-85d6-d8cba28eac83","_links":{"avatar":{"href":"https://dev.azure.com/sasrose/_apis/GraphProfile/MemberAvatars/aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj"}},"id":"8950b4b5-5046-43c0-85d6-d8cba28eac83","uniqueName":"sasrose@microsoft.com","imageUrl":"https://dev.azure.com/sasrose/_apis/GraphProfile/MemberAvatars/aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj","descriptor":"aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj"},"modifiedOn":"2019-09-22T23:30:03.213Z","isDeleted":false,"lastRelease":{"id":20,"name":"Release-19","artifacts":[],"_links":{},"description":"Triggered by artifact source tacosandburritos.","releaseDefinition":{"id":3,"projectReference":null,"_links":{}},"createdOn":"2019-09-22T20:23:48.427Z","createdBy":{"displayName":"Microsoft.VisualStudio.Services.ReleaseManagement","id":"0000000d-0000-8888-8000-000000000000","uniqueName":"0000000d-0000-8888-8000-000000000000@2c895908-04e0-4952-89fd-54b0046d6288","descriptor":"s2s.MDAwMDAwMGQtMDAwMC04ODg4LTgwMDAtMDAwMDAwMDAwMDAwQDJjODk1OTA4LTA0ZTAtNDk1Mi04OWZkLTU0YjAwNDZkNjI4OA"}},"variables":{"DEPLOYMENT_CONFIG":{"value":""}},"variableGroups":[],"environments":[{"id":4,"name":"Profile Model","rank":1,"owner":{"displayName":"Sasha Rosenbaum","url":"https://spsprodcus1.vssps.visualstudio.com/A8ab679b7-72d5-4e57-9d81-bcbee196a68a/_apis/Identities/8950b4b5-5046-43c0-85d6-d8cba28eac83","_links":{"avatar":{"href":"https://dev.azure.com/sasrose/_apis/GraphProfile/MemberAvatars/aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj"}},"id":"8950b4b5-5046-43c0-85d6-d8cba28eac83","uniqueName":"sasrose@microsoft.com","imageUrl":"https://dev.azure.com/sasrose/_apis/GraphProfile/MemberAvatars/aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj","descriptor":"aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":11}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":14},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":17}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"ubuntu-16.04"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":516,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"46e4be58-730b-4389-8a2f-ea10b3e5e815","version":"1.*","name":"Install az AML extension","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"140a8c0d-2038-44c5-8ada-2cc12e4ed038","scriptLocation":"inlineScript","scriptPath":"","inlineScript":"az extension add -n azure-cli-ml","args":"","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"}},{"environment":{},"taskId":"46e4be58-730b-4389-8a2f-ea10b3e5e815","version":"1.*","name":"Profile model","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"140a8c0d-2038-44c5-8ada-2cc12e4ed038","scriptLocation":"inlineScript","scriptPath":"","inlineScript":"cd $(System.ArtifactsDirectory)/github-kubeflow-and-mlops/code/deploy\n\n# ** This works now, but takes 55 minutes **\naz ml model profile -n foodprofile -m $(Release.Artifacts.amlmodel.DefinitionName):$(Release.Artifacts.amlmodel.BuildNumber) --ic inferenceconfig.json -d \"{\\\"image\\\": \\\"https://www.exploreveg.org/files/2015/05/sofritas-burrito.jpeg\\\"}\" -t myprofileresult.json -w kubeflow-aml --r kubeflow-rg\n\ndepcfg=\"$(tr -d \"\\n\\r \" < deploymentconfig.json)\"\n#printf -v escapeddepcfg \"%q\" \"$depcfg\"\n","args":"","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":19,"url":"https://vsrm.dev.azure.com/sasrose/5c4aee01-ebcd-4d0a-a87d-e22e5b9e5db8/_apis/Release/releases/19","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/sasrose/_apis/public/Release/badge/5c4aee01-ebcd-4d0a-a87d-e22e5b9e5db8/3/4"},{"id":5,"name":"Deploy to ACI","rank":2,"owner":{"displayName":"Sasha Rosenbaum","url":"https://spsprodcus1.vssps.visualstudio.com/A8ab679b7-72d5-4e57-9d81-bcbee196a68a/_apis/Identities/8950b4b5-5046-43c0-85d6-d8cba28eac83","_links":{"avatar":{"href":"https://dev.azure.com/sasrose/_apis/GraphProfile/MemberAvatars/aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj"}},"id":"8950b4b5-5046-43c0-85d6-d8cba28eac83","uniqueName":"sasrose@microsoft.com","imageUrl":"https://dev.azure.com/sasrose/_apis/GraphProfile/MemberAvatars/aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj","descriptor":"aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":10}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":15},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":19}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"ubuntu-16.04"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":516,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"46e4be58-730b-4389-8a2f-ea10b3e5e815","version":"1.*","name":"Install az AML extension","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"140a8c0d-2038-44c5-8ada-2cc12e4ed038","scriptLocation":"inlineScript","scriptPath":"","inlineScript":"az extension add -n azure-cli-ml","args":"","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"}},{"environment":{"DEPLOYMENT_CFG":"$(DEPLOYMENT_CONFIG)"},"taskId":"46e4be58-730b-4389-8a2f-ea10b3e5e815","version":"1.*","name":"Deploy model","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"140a8c0d-2038-44c5-8ada-2cc12e4ed038","scriptLocation":"inlineScript","scriptPath":"","inlineScript":"echo \"$(System.ArtifactsDirectory)/github-kubeflow-and-mlops/code/deploy\" \ncd $(System.ArtifactsDirectory)/github-kubeflow-and-mlops/code/deploy\n\n# Deploy to ACI\naz ml model deploy --name fooddeployaci --dc deploymentconfig.json --ic inferenceconfig.json -m $(Release.Artifacts.amlmodel.DefinitionName):$(Release.Artifacts.amlmodel.BuildNumber) --overwrite --workspace-name kubeflow-aml --resource-group kubeflow-rg","args":"","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"}}]},{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"ubuntu-16.04"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":516,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":2,"phaseType":1,"name":"Test ACI deployment","refName":null,"workflowTasks":[{"environment":{},"taskId":"46e4be58-730b-4389-8a2f-ea10b3e5e815","version":"1.*","name":"Install az AML extension","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"140a8c0d-2038-44c5-8ada-2cc12e4ed038","scriptLocation":"inlineScript","scriptPath":"","inlineScript":"az extension add -n azure-cli-ml","args":"","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"}},{"environment":{"DEPLOYMENT_CFG":"$(DEPLOYMENT_CONFIG)"},"taskId":"46e4be58-730b-4389-8a2f-ea10b3e5e815","version":"1.*","name":"Test with images","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"140a8c0d-2038-44c5-8ada-2cc12e4ed038","scriptLocation":"scriptPath","scriptPath":"$(System.DefaultWorkingDirectory)/github-kubeflow-and-mlops/code/deploy/inference.sh","inlineScript":"cd $(System.ArtifactsDirectory)/github-kubeflow-and-mlops/code/deploy\n\n# Deploy to ACI\naz ml model deploy --name fooddeployaci --dc deploymentconfig.json --ic inferenceconfig.json -m $(Release.Artifacts.amlmodel.DefinitionName):$(Release.Artifacts.amlmodel.BuildNumber) --overwrite --workspace-name kfaml --resource-group kubeflow-mlops-rg","args":"","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"Profile Model","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":20,"url":"https://vsrm.dev.azure.com/sasrose/5c4aee01-ebcd-4d0a-a87d-e22e5b9e5db8/_apis/Release/releases/20","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":{"isEnabled":false,"timeout":900,"samplingInterval":5,"stabilizationTime":1,"minimumSuccessDuration":0},"gates":[{"tasks":[{"environment":{},"taskId":"99a72e7f-25e4-4576-bf38-22a42b995ed8","version":"1.*","name":"Query Azure Monitor alerts","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"140a8c0d-2038-44c5-8ada-2cc12e4ed038","ResourceGroupName":"kubeflow-rg","filterType":"resource","resource":"Microsoft.ContainerInstance/containerGroups/fooddeployaci","alertRule":"","severity":"Sev0,Sev1,Sev2,Sev3,Sev4","timeRange":"1h","alertState":"New","monitorCondition":"Fired"}}]}]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/sasrose/_apis/public/Release/badge/5c4aee01-ebcd-4d0a-a87d-e22e5b9e5db8/3/5"},{"id":6,"name":"Deploy to AKS","rank":4,"owner":{"displayName":"Sasha Rosenbaum","url":"https://spsprodcus1.vssps.visualstudio.com/A8ab679b7-72d5-4e57-9d81-bcbee196a68a/_apis/Identities/8950b4b5-5046-43c0-85d6-d8cba28eac83","_links":{"avatar":{"href":"https://dev.azure.com/sasrose/_apis/GraphProfile/MemberAvatars/aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj"}},"id":"8950b4b5-5046-43c0-85d6-d8cba28eac83","uniqueName":"sasrose@microsoft.com","imageUrl":"https://dev.azure.com/sasrose/_apis/GraphProfile/MemberAvatars/aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj","descriptor":"aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Sasha Rosenbaum","url":"https://spsprodcus1.vssps.visualstudio.com/A8ab679b7-72d5-4e57-9d81-bcbee196a68a/_apis/Identities/8950b4b5-5046-43c0-85d6-d8cba28eac83","_links":{"avatar":{"href":"https://dev.azure.com/sasrose/_apis/GraphProfile/MemberAvatars/aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj"}},"id":"8950b4b5-5046-43c0-85d6-d8cba28eac83","uniqueName":"sasrose@microsoft.com","imageUrl":"https://dev.azure.com/sasrose/_apis/GraphProfile/MemberAvatars/aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj","descriptor":"aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj"},"id":24}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":13},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":18}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"ubuntu-16.04"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":516,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"46e4be58-730b-4389-8a2f-ea10b3e5e815","version":"1.*","name":"Install az AML extension","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"140a8c0d-2038-44c5-8ada-2cc12e4ed038","scriptLocation":"inlineScript","scriptPath":"","inlineScript":"az extension add -n azure-cli-ml","args":"","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"}},{"environment":{"DEPLOYMENT_CFG":"$(DEPLOYMENT_CONFIG)"},"taskId":"46e4be58-730b-4389-8a2f-ea10b3e5e815","version":"1.*","name":"Deploy model","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"140a8c0d-2038-44c5-8ada-2cc12e4ed038","scriptLocation":"inlineScript","scriptPath":"","inlineScript":"echo \"$(System.ArtifactsDirectory)/github-kubeflow-and-mlops/code/deploy\" \ncd $(System.ArtifactsDirectory)/github-kubeflow-and-mlops/code/deploy\n\n# Deploy to AKS\necho \"az ml model deploy --name fooddeployaks --dc aksdeploymentconfig.json --ic inferenceconfig.json -m $(Release.Artifacts.amlmodel.DefinitionName):$(Release.Artifacts.amlmodel.BuildNumber) --overwrite --workspace-name kubeflow-aml --resource-group kubeflow-rg\"\n\naz ml model deploy --name fooddeployaks --dc aksdeploymentconfig.json --ic inferenceconfig.json -m $(Release.Artifacts.amlmodel.DefinitionName):$(Release.Artifacts.amlmodel.BuildNumber) --overwrite --workspace-name kubeflow-aml --resource-group kubeflow-rg  --ct aks-cluster","args":"$(DEPLOYMENT_CONFIG)","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"Test ACI","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":20,"url":"https://vsrm.dev.azure.com/sasrose/5c4aee01-ebcd-4d0a-a87d-e22e5b9e5db8/_apis/Release/releases/20","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/sasrose/_apis/public/Release/badge/5c4aee01-ebcd-4d0a-a87d-e22e5b9e5db8/3/6"},{"id":7,"name":"Test ACI","rank":3,"owner":{"displayName":"Sasha Rosenbaum","url":"https://spsprodcus1.vssps.visualstudio.com/A8ab679b7-72d5-4e57-9d81-bcbee196a68a/_apis/Identities/8950b4b5-5046-43c0-85d6-d8cba28eac83","_links":{"avatar":{"href":"https://dev.azure.com/sasrose/_apis/GraphProfile/MemberAvatars/aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj"}},"id":"8950b4b5-5046-43c0-85d6-d8cba28eac83","uniqueName":"sasrose@microsoft.com","imageUrl":"https://dev.azure.com/sasrose/_apis/GraphProfile/MemberAvatars/aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj","descriptor":"aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":21}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":22},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":23}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"ubuntu-16.04"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":516,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"46e4be58-730b-4389-8a2f-ea10b3e5e815","version":"1.*","name":"Install az AML extension","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"140a8c0d-2038-44c5-8ada-2cc12e4ed038","scriptLocation":"inlineScript","scriptPath":"","inlineScript":"az extension add -n azure-cli-ml\n\n","args":"","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"}},{"environment":{},"taskId":"46e4be58-730b-4389-8a2f-ea10b3e5e815","version":"1.*","name":"Azure CLI $(System.DefaultWorkingDirectory)/github-kubeflow-and-mlops/code/deploy/inference.sh","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"140a8c0d-2038-44c5-8ada-2cc12e4ed038","scriptLocation":"scriptPath","scriptPath":"$(System.DefaultWorkingDirectory)/github-kubeflow-and-mlops/code/deploy/inference.sh","inlineScript":"","args":"","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"Deploy to ACI","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":20,"url":"https://vsrm.dev.azure.com/sasrose/5c4aee01-ebcd-4d0a-a87d-e22e5b9e5db8/_apis/Release/releases/20","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"unmapped"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/sasrose/_apis/public/Release/badge/5c4aee01-ebcd-4d0a-a87d-e22e5b9e5db8/3/7"},{"id":8,"name":"Test AKS","rank":5,"owner":{"displayName":"Sasha Rosenbaum","url":"https://spsprodcus1.vssps.visualstudio.com/A8ab679b7-72d5-4e57-9d81-bcbee196a68a/_apis/Identities/8950b4b5-5046-43c0-85d6-d8cba28eac83","_links":{"avatar":{"href":"https://dev.azure.com/sasrose/_apis/GraphProfile/MemberAvatars/aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj"}},"id":"8950b4b5-5046-43c0-85d6-d8cba28eac83","uniqueName":"sasrose@microsoft.com","imageUrl":"https://dev.azure.com/sasrose/_apis/GraphProfile/MemberAvatars/aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj","descriptor":"aad.NWFmNjFlNWUtYjBmMi03YjA3LTllMjQtNGI5MjhlMmM1ZDZj"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":25}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":26},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":27}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"ubuntu-16.04"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":516,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"46e4be58-730b-4389-8a2f-ea10b3e5e815","version":"1.*","name":"Install az AML extension","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"140a8c0d-2038-44c5-8ada-2cc12e4ed038","scriptLocation":"inlineScript","scriptPath":"","inlineScript":"az extension add -n azure-cli-ml\n\n","args":"","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"}},{"environment":{},"taskId":"46e4be58-730b-4389-8a2f-ea10b3e5e815","version":"1.*","name":"Azure CLI $(System.DefaultWorkingDirectory)/github-kubeflow-and-mlops/code/deploy/inference.sh","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"140a8c0d-2038-44c5-8ada-2cc12e4ed038","scriptLocation":"inlineScript","scriptPath":"$(System.DefaultWorkingDirectory)/github-kubeflow-and-mlops/code/deploy/inference.sh","inlineScript":"echo \"test the deployment with a burrito image\"\naz ml service run -n fooddeployaks -d '{ \"image\": \"https://www.exploreveg.org/files/2015/05/sofritas-burrito.jpeg\" }' -w kubeflow-aml -g kubeflow-rg\necho \"test the deployment with a taco image\"\naz ml service run -n fooddeployaks -d '{ \"image\": \"https://c1.staticflickr.com/5/4022/4401140214_f489c708f0_b.jpg\" }' -w kubeflow-aml -g kubeflow-rg","args":"","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"Deploy to AKS","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":20,"url":"https://vsrm.dev.azure.com/sasrose/5c4aee01-ebcd-4d0a-a87d-e22e5b9e5db8/_apis/Release/releases/20","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"testing"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/sasrose/_apis/public/Release/badge/5c4aee01-ebcd-4d0a-a87d-e22e5b9e5db8/3/8"}],"artifacts":[{"sourceId":"22d313af-6a79-4997-a98e-5c2bda54fdb9:tacosandburritos","type":"AzureMLMMS","alias":"amlmodel","definitionReference":{"connection":{"id":"22d313af-6a79-4997-a98e-5c2bda54fdb9","name":"aml-workspace"},"defaultVersionType":{"id":"latestType","name":"Latest version for the specified models"},"definition":{"id":"tacosandburritos","name":"tacosandburritos"}},"isPrimary":true,"isRetained":false},{"sourceId":"2a68c07b-b498-44c9-9f79-c270837673b4:DivineOps/kubeflow-and-mlops","type":"GitHub","alias":"github-kubeflow-and-mlops","definitionReference":{"artifactSourceDefinitionUrl":{"id":"https://github.com/DivineOps/kubeflow-and-mlops","name":""},"branch":{"id":"master","name":"master"},"checkoutNestedSubmodules":{"id":"True","name":"Any nested submodules within"},"checkoutSubmodules":{"id":"","name":""},"connection":{"id":"2a68c07b-b498-44c9-9f79-c270837673b4","name":"github.com_DivineOps"},"defaultVersionSpecific":{"id":"","name":""},"defaultVersionType":{"id":"latestFromBranchType","name":"Latest from the default branch"},"definition":{"id":"DivineOps/kubeflow-and-mlops","name":"DivineOps/kubeflow-and-mlops"},"fetchDepth":{"id":"","name":""},"gitHubRepositoryId":{"id":"207664131","name":"207664131"},"gitLfsSupport":{"id":"","name":""}},"isRetained":false}],"triggers":[{"artifactAlias":"amlmodel","triggerConditions":[],"triggerType":1}],"releaseNameFormat":"Release-$(rev:r)","tags":[],"properties":{"DefinitionCreationSource":{"$type":"System.String","$value":"ReleaseImport"},"IntegrateBoardsWorkItems":{"$type":"System.String","$value":"False"},"IntegrateJiraWorkItems":{"$type":"System.String","$value":"false"}},"id":3,"name":"Tacos vs. Burritos - Release Model","path":"\\","projectReference":null,"url":"https://vsrm.dev.azure.com/sasrose/5c4aee01-ebcd-4d0a-a87d-e22e5b9e5db8/_apis/Release/definitions/3","_links":{"self":{"href":"https://vsrm.dev.azure.com/sasrose/5c4aee01-ebcd-4d0a-a87d-e22e5b9e5db8/_apis/Release/definitions/3"},"web":{"href":"https://dev.azure.com/sasrose/5c4aee01-ebcd-4d0a-a87d-e22e5b9e5db8/_release?definitionId=3"}}}